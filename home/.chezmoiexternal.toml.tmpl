
{{- if or (and (eq .chezmoi.os "linux") (not .ephemeral)) (eq .chezmoi.os "darwin")}}
[".local/bin/age"]
    type = "archive-file"
    url = {{ gitHubLatestReleaseAssetURL "FiloSottile/age" (printf "age-*-%s-%s.tar.gz" .chezmoi.os .chezmoi.arch) | quote }}
    executable = true
    path = "age/age"
[".local/bin/age-keygen"]
    type = "archive-file"
    url = {{ gitHubLatestReleaseAssetURL "FiloSottile/age" (printf "age-*-%s-%s.tar.gz" .chezmoi.os .chezmoi.arch) | quote }}
    executable = true
    path = "age/age-keygen"
[".local/bin/sops"]
    type = "file"
    url = {{ gitHubLatestReleaseAssetURL "getsops/sops" (printf "sops-*.%s.%s" .chezmoi.os .chezmoi.arch) | quote }}
    executable = true
{{- end }}

[".local/bin/kubectl"]
    type = "file"
    url = {{ printf "https://dl.k8s.io/release/%s/bin/%s/%s/kubectl" (toString (gitHubLatestRelease "kubernetes/kubernetes").TagName) .chezmoi.os .chezmoi.arch | quote }}
    executable = true
    refreshPeriod = "168h"

[".local/bin/helm"]
    type = "archive-file"
    url = {{ printf "https://get.helm.sh/helm-%s-%s-%s.tar.gz" (toString (gitHubLatestRelease "helm/helm").TagName) .chezmoi.os .chezmoi.arch | quote }}
    executable = true
    stripComponents = 1
    path = "helm"

[".local/bin/k9s"]
    type = "archive-file"
    url = {{ gitHubLatestReleaseAssetURL "derailed/k9s" (printf "k9s_Linux_%s.tar.gz" .chezmoi.arch) | quote }}
    executable = true
    path = "k9s"

[".local/bin/syft"]
    type = "archive-file"
    url = {{ gitHubLatestReleaseAssetURL "anchore/syft" (printf "syft_*_%s_%s.tar.gz" .chezmoi.os .chezmoi.arch) | quote }}
    executable = true
    path = "syft"

[".local/bin/grype"]
    type = "archive-file"
    url = {{ gitHubLatestReleaseAssetURL "anchore/grype" (printf "grype_*_%s_%s.tar.gz" .chezmoi.os .chezmoi.arch) | quote }}
    executable = true
    path = "grype"

{{/* CDD directory changing - https://linuxhandbook.com/cdd/  -- hardcode on a version */}}
[".local/bin/cdd"]
    type = "file"
    url = "https://raw.githubusercontent.com/gsinger/cdd/7f474b6d989847c422cd1cbf9a9e57d6cc47597f/cdd_run"
    executable = true

{{- if .personal -}}
[".local/bin/bw"]
    type = "archive-file"
    url = "https://vault.bitwarden.com/download/?app=cli&platform=linux"
    refreshPeriod = "168h"
    executable = true
    path = "bw"
{{- end }}

[".my-custom-zsh/zsh-syntax-highlighting"]
    type = "archive"
    url = "https://github.com/zsh-users/zsh-syntax-highlighting/archive/master.tar.gz"
    exact = true
    stripComponents = 1
    refreshPeriod = "168h"
    exclude = [
        "*/.editorconfig",
        "*/.gitattributes",
        "*/.github",
        "*/.gitignore",
    ]

[".my-custom-zsh/zsh-autosuggestions"]
    type = "archive"
    url = "https://github.com/zsh-users/zsh-autosuggestions/archive/master.tar.gz"
    exact = true
    stripComponents = 1
    refreshPeriod = "168h"
    exclude = [
        "*/.editorconfig",
        "*/.gitattributes",
        "*/.github",
        "*/.gitignore",
    ]

[".my-custom-zsh/eza-autosuggestions"]
    type = "archive"
    url = {{ gitHubLatestReleaseAssetURL "eza-community/eza" "completions-*.tar.gz" | quote }}
    exact = true
    stripComponents = 3
    refreshPeriod = "168h"


{{- if and (not .ephemeral) (not .headless) }}
    {{-   $fontDir := "" }}
    {{-   if eq .chezmoi.os "darwin" }}
        {{-     $fontDir = "Library/Fonts" }}
    {{-   else if eq .chezmoi.os "linux" }}
        {{-     $fontDir = ".local/share/fonts/" }}
    {{-   end }}
    {{-   range (list
    "NerdFontsSymbolsOnly"
    "JetBrainsMono"
    "FiraCode"
    "FiraMono"
    ) }}
    ["{{ $fontDir }}/{{ . }}"]
        type = "archive"
        exact = true
        url = {{ gitHubLatestReleaseAssetURL "ryanoasis/nerd-fonts" (printf "%s.tar.xz" . ) | quote }}
        refreshPeriod = "168h"
        exclude = [
            "LICENSE",
            "README.md"
        ]
    {{-   end }}
{{- end }}